{"version":3,"sources":["api/schm/schm.socket.js"],"names":[],"mappings":"AAAA;;;;AAIA;;;;;QAOgB,Q,GAAA,Q;;AALhB;;;;;;AAEA;AACA,IAAI,SAAS,CAAC,MAAD,EAAS,QAAT,CAAb;;AAEO,SAAS,QAAT,CAAkB,MAAlB,EAA0B;AAC/B;AACA,OAAK,IAAI,IAAI,CAAR,EAAW,eAAe,OAAO,MAAtC,EAA8C,IAAI,YAAlD,EAAgE,GAAhE,EAAqE;AACnE,QAAI,QAAQ,OAAO,CAAP,CAAZ;AACA,QAAI,WAAW,eAAe,UAAU,KAAzB,EAAgC,MAAhC,CAAf;;AAEA,mBAAW,EAAX,CAAc,KAAd,EAAqB,QAArB;AACA,WAAO,EAAP,CAAU,YAAV,EAAwB,eAAe,KAAf,EAAsB,QAAtB,CAAxB;AACD;AACF;;AAGD,SAAS,cAAT,CAAwB,KAAxB,EAA+B,MAA/B,EAAuC;AACrC,SAAO,UAAS,GAAT,EAAc;AACnB,WAAO,IAAP,CAAY,KAAZ,EAAmB,GAAnB;AACD,GAFD;AAGD;;AAED,SAAS,cAAT,CAAwB,KAAxB,EAA+B,QAA/B,EAAyC;AACvC,SAAO,YAAW;AAChB,mBAAW,cAAX,CAA0B,KAA1B,EAAiC,QAAjC;AACD,GAFD;AAGD","file":"api/schm/schm.socket.js","sourcesContent":["/**\n * Broadcast updates to client when the model changes\n */\n\n'use strict';\n\nimport SchmEvents from './schm.events';\n\n// Model events to emit\nvar events = ['save', 'remove'];\n\nexport function register(socket) {\n  // Bind model events to socket events\n  for (var i = 0, eventsLength = events.length; i < eventsLength; i++) {\n    var event = events[i];\n    var listener = createListener('schm:' + event, socket);\n\n    SchmEvents.on(event, listener);\n    socket.on('disconnect', removeListener(event, listener));\n  }\n}\n\n\nfunction createListener(event, socket) {\n  return function(doc) {\n    socket.emit(event, doc);\n  };\n}\n\nfunction removeListener(event, listener) {\n  return function() {\n    SchmEvents.removeListener(event, listener);\n  };\n}\n"],"sourceRoot":"/source/"}